(this["webpackJsonpsd-0x-project-frontend-online-store"]=this["webpackJsonpsd-0x-project-frontend-online-store"]||[]).push([[0],{23:function(e){e.exports=JSON.parse('["Acre","Alagoas","Amap\xe1","Amazonas","Bahia","Cear\xe1","Distrito Federal","Espirito Santo","Goi\xe1s","Maranh\xe3o","Mato Grosso do Sul","Mato Grosso","Minas Gerais","Par\xe1","Para\xedba","Paran\xe1","Pernambuco","Piau\xed","Rio de Janeiro","Rio Grande do Norte","Rio Grande do Sul","Rond\xf4nia","Roraima","Santa Catarina","S\xe3o Paulo","Sergipe","Tocantins"]')},24:function(e,t,a){e.exports=a(40)},29:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),o=a.n(c),i=(a(29),a(8)),u=a(2),l=a(1),s=a(9),d=a.n(s),m=a(11);function p(){return(p=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://api.mercadolibre.com/sites/MLB/categories").then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://api.mercadolibre.com/sites/MLB/search?category=".concat(t,"&q=").concat(a)).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return E.apply(this,arguments)}function E(){return(E=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://api.mercadolibre.com/items/".concat(t)).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b=function(e){var t=e.setCategory,a=e.search,c=Object(n.useState)([]),o=Object(l.a)(c,2),i=o[0],u=o[1];return Object(n.useEffect)((function(){(function(){return p.apply(this,arguments)})().then((function(e){u(e)}))}),[]),0===i.length?r.a.createElement("p",null,"carregando"):i.map((function(e){return r.a.createElement("label",{htmlFor:e.id,key:e.name,"data-testid":"category"},r.a.createElement("input",{type:"radio",value:e.id,id:e.id,name:"category",onClick:function(e){return t({search:a,category:e.target.value})}}),e.name)}))},v=function(e){var t=e.setSearch,a=e.category,n=e.queryButtonRef;return r.a.createElement("div",{id:"search-bar-container"},r.a.createElement("label",{htmlFor:"search-bar","data-testid":"home-initial-message",id:"initial-message"},r.a.createElement("input",{type:"text",id:"search-bar","data-testid":"query-input",onKeyDown:function(e){"Enter"===e.key&&n.current&&n.current.click()},onChange:function(e){return t({search:e.target.value,category:a})}}),r.a.createElement("br",null),"Digite algum termo de pesquisa ou escolha uma categoria"))},y=Object(n.createContext)();function g(){var e=Object(n.useContext)(y);return{count:e.count,setProductCount:e.setProductCount,checkoutInfo:e.checkoutInfo,setCheckoutInfo:e.setCheckoutInfo,productQuantity:e.productQuantity,setProductQuantity:e.setProductQuantity}}var j=function(e){var t=e.children,a=Object(n.useState)([]),c=Object(l.a)(a,2),o=c[0],i=c[1],u=Object(n.useState)({totalPrice:0}),s=Object(l.a)(u,2),d=s[0],m=s[1],p=Object(n.useState)([]),f=Object(l.a)(p,2),h=f[0],E=f[1];return r.a.createElement(y.Provider,{value:{count:o,setProductCount:i,checkoutInfo:d,setCheckoutInfo:m,productQuantity:h,setProductQuantity:E}},t)},O=a(6);function k(e,t,a){var n=t.setProductCount,r=t.count;!r.find((function(t){return t.id===e.id}))&&a&&n([].concat(Object(O.a)(r),[{title:e.title,id:e.id,thumbnail:e.thumbnail,price:e.price,available_quantity:e.available_quantity}]))}var C=function(e){var t=e.props,a=e.product,n=t.count,r=t.setProductCount,c=t.productQuantity,o=t.setProductQuantity,i=t.setCheckoutInfo,u=t.checkoutInfo,l=c.filter((function(e){var t=e.id;return t!==a.id||void 0===t}));k(a,{setProductCount:r,count:n},!0);var s=c.find((function(e){return e.id===a.id}));(void 0===s?0:s.quantity)<a.available_quantity&&(o([].concat(Object(O.a)(l),[{id:a.id,quantity:void 0===s?1:s.quantity+1}])),i({totalPrice:u.totalPrice+a.price}))},P=function(e){var t=e.search,a=e.category,c=Object(n.useState)([]),o=Object(l.a)(c,2),u=o[0],s=o[1],d=Object(n.useState)(!0),m=Object(l.a)(d,2),p=m[0],h=m[1],E=g(),b={count:E.count,setProductCount:E.setProductCount,productQuantity:E.productQuantity,setProductQuantity:E.setProductQuantity,setCheckoutInfo:E.setCheckoutInfo,checkoutInfo:E.checkoutInfo};return Object(n.useEffect)((function(){(function(e,t){return f.apply(this,arguments)})(a,t).then((function(e){s(e.results),h(!1)}))}),[a,t]),p?r.a.createElement("h1",null,"Carregando..."):r.a.createElement(r.a.Fragment,null,u.map((function(e){return r.a.createElement("div",{className:"product","data-testid":"product-detail-link",key:e.id},r.a.createElement("p",{"data-testid":"product"},r.a.createElement(i.b,{to:"/".concat(e.id)},e.title)),r.a.createElement("div",null,r.a.createElement("img",{src:"".concat(e.thumbnail),alt:"".concat(e.title)}),e.shipping.free_shipping&&r.a.createElement("span",null,r.a.createElement("img",{src:"images/free-shipping.png",alt:"free shipping icon",className:"free-shipping","data-testid":"free-shipping"}),"Frete Gr\xe1tis")),r.a.createElement("button",{type:"button","data-testid":"product-detail-add-to-cart",className:"add-to-cart-button",onClick:function(){return C({props:b,product:e})}},"Adicionar ao carrinho"),r.a.createElement("p",{"data-testid":"product",className:"price"},e.price))})))},S=function(){var e=g().productQuantity;return r.a.createElement(i.b,{to:"/shopping-cart",id:"shopping-icon"},r.a.createElement("button",{type:"button","data-testid":"shopping-cart-button",className:"icon-button"},r.a.createElement("span",{className:"product-count","data-testid":"shopping-cart-size"},e.reduce((function(e,t){return e+t.quantity}),0)),r.a.createElement("img",{src:"/images/shopping-cart.png",alt:"shpping cart icon"})))},N=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(n.useRef)(null),i=Object(n.useState)(""),u=Object(l.a)(i,2),s=u[0],d=u[1],m=Object(n.useState)({search:"",category:""}),p=Object(l.a)(m,2),f=p[0],h=p[1],E=g().count;return r.a.createElement("div",{className:"search-form"},r.a.createElement("div",{className:"categories"},r.a.createElement("p",null,"Categorias: "),r.a.createElement(b,{setCategory:h,search:f.search})),r.a.createElement("div",{className:"container"},r.a.createElement("div",null,r.a.createElement(v,{setSearch:h,category:f.category,queryButtonRef:o}),r.a.createElement("button",{type:"button","data-testid":"query-button",id:"query-button",ref:o,onClick:function(){d(f.search),c(f.search)}},"Search")),""!==a&&""!==s&&r.a.createElement(P,{search:a,category:s})),r.a.createElement(S,{count:E}))};function w(){var e=Object(u.g)();return r.a.createElement("button",{type:"button",className:"icon-button",onClick:e.goBack,id:"back-arrow"},r.a.createElement("img",{src:"https://img.icons8.com/ios-filled/50/000000/circled-left-2.png",alt:"previous page arrow"}))}var q=function(){return r.a.createElement(i.b,{to:"/checkout-products"},r.a.createElement("button",{type:"button","data-testid":"checkout-product",className:"icon-button"},r.a.createElement("img",{src:"/images/checkout.png",alt:"shopping cart icon"})))},x=function(e){var t=e.setPrice,a=e.price,c=e.product,o=g(),i=o.setCheckoutInfo,u=o.productQuantity,s=o.setProductQuantity,d=o.count,m=o.setProductCount,p=Object(n.useState)(u.find((function(e){return e.id===c.id})).quantity),f=Object(l.a)(p,2),h=f[0],E=f[1],b=function(e){var t=c.id;E(e);var a=u.filter((function(e){var a=e.id;return a!==t||void 0===a}));if(s([].concat(Object(O.a)(a),[{id:t,quantity:e}])),0===e){var n=d.filter((function(e){var a=e.id;return t!==a}));m(n)}};Object(n.useEffect)((function(){h>=c.available_quantity?document.querySelector("#".concat(c.id)).style.display="none":document.querySelector("#".concat(c.id)).style.display="initial"}),[h,c.available_quantity,c.id]);var v=function(e){t(e),i({totalPrice:e.toFixed(2)})};return r.a.createElement("div",null,r.a.createElement("button",{"data-testid":"product-increase-quantity",type:"button",onClick:function(){var e=a-c.price;v(h>0?e:a),b(0===h?0:h-1)}},"-"),r.a.createElement("span",null,h),r.a.createElement("button",{"data-testid":"product-decrease-quantity",type:"button",id:c.id,onClick:function(){var e=a+c.price;v(e),b(h+1)}},"+"))},I=function(e){var t=e.product,a=e.setPrice,n=e.price;return r.a.createElement("div",{className:"product-cart-card"},r.a.createElement("div",{className:"product-image"},r.a.createElement("img",{src:t.thumbnail,alt:t.title})),r.a.createElement("p",{"data-testid":"shopping-cart-product-name"},t.title),r.a.createElement(x,{setPrice:a,price:n,product:t}),r.a.createElement("p",{className:"price"},t.price))},Q=function(){var e=g(),t=e.count,a=e.checkoutInfo,c=Object(n.useState)(a.totalPrice),o=Object(l.a)(c,2),i=o[0],u=o[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"shopping-cart-header"},r.a.createElement(w,null),r.a.createElement(q,null)),t.length<1?r.a.createElement("h1",{"data-testid":"shopping-cart-empty-message",id:"shopping-cart-empty-message"},"O seu carrinho est\xe1 vazio"):r.a.createElement("div",{className:"products-in-cart"},t.map((function(e){return r.a.createElement(I,{price:i,setPrice:u,product:e,key:e.id})})),r.a.createElement("span",{className:"price total-price"},a.totalPrice)),r.a.createElement("p",null,r.a.createElement("a",{href:"https://icons8.com/icon/26191/back-arrow"},"Back Arrow icon by Icons8")))},R=a(23),F=function(){var e=g(),t=e.count,a=e.checkoutInfo;return 0===a.totalPrice?r.a.createElement(u.a,{to:"/"}):r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),u.a}},r.a.createElement(w,null),r.a.createElement("div",{className:"products"},r.a.createElement("h2",null,"Revise seus Produtos"),t.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("img",{src:e.thumbnail,alt:e.title}),r.a.createElement("p",null,e.title),r.a.createElement("p",{className:"price"},e.price))})),r.a.createElement("span",{className:"price total-price"},a.totalPrice)),r.a.createElement("h2",null,"Informa\xe7\xf5es do Comprador"),r.a.createElement("div",{className:"client-info"},r.a.createElement("div",null,r.a.createElement("input",{type:"text",id:"full-name",placeholder:"Nome Completo","data-testid":"checkout-fullname"}),r.a.createElement("input",{type:"text",id:"cpf",placeholder:"CPF","data-testid":"checkout-cpf"}),r.a.createElement("input",{type:"email",id:"client-email",placeholder:"Email","data-testid":"checkout-email"}),r.a.createElement("input",{type:"tel",id:"telephone",placeholder:"Telefone","data-testid":"checkout-phone"})),r.a.createElement("div",null,r.a.createElement("input",{type:"text",placeholder:"CEP",title:"Please enter a Zip Code",pattern:"^\\s*?\\d{5}(?:[-\\s]\\d{4})?\\s*?$","data-testid":"checkout-cep"}),r.a.createElement("input",{type:"text",id:"address",placeholder:"Endere\xe7o","data-testid":"checkout-address"})),r.a.createElement("div",null,r.a.createElement("input",{type:"text",id:"complement",placeholder:"Complemento"}),r.a.createElement("input",{type:"number",id:"house-number",placeholder:"N\xfamero"}),r.a.createElement("input",{type:"text",id:"city",placeholder:"Cidade"}),r.a.createElement("select",{id:"state",placeholder:"Estado"},R.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("h2",null,"M\xe9todos de Pagamento"),r.a.createElement("div",{className:"payment-method"},r.a.createElement("label",{htmlFor:"boleto"},r.a.createElement("input",{type:"radio",name:"payment",value:"boleto",id:"boleto"}),"Boleto"),r.a.createElement("p",null,"Cart\xe3o de cr\xe9dito"),r.a.createElement("div",{id:"credit-card"},r.a.createElement("label",{htmlFor:"visa"},r.a.createElement("input",{type:"radio",name:"payment",value:"visa",id:"visa"}),"Visa"),r.a.createElement("label",{htmlFor:"mastercard"},r.a.createElement("input",{type:"radio",name:"payment",value:"mastercard",id:"mastercard"}),"MasterCard"),r.a.createElement("label",{htmlFor:"elo"},r.a.createElement("input",{type:"radio",name:"payment",value:"elo",id:"elo"}),"Elo")))),r.a.createElement("button",{type:"submit",id:"confirm-purchase-button"},"Comprar"))},M=a(16),A=a(14),B=function(e){var t=e.handleClickStars;return Object(O.a)(Array(5)).map((function(e,a){return r.a.createElement("span",{key:a+1,className:"star",role:"button",tabIndex:0,onKeyPress:function(){},onClick:function(){for(var e=function(e){return document.querySelectorAll(".star")[e]},n=0;n<=a;n+=1)e(n).innerHTML="&#9733;";for(var r=a+1;r<=4;r+=1)e(r).innerHTML="&#9734;";t()}},"\u2606")}))},_=function(e){var t=e.review;return r.a.createElement("div",{className:"review-card"},r.a.createElement("div",null,r.a.createElement("p",null,t.email),r.a.createElement("p",null,t.stars)),r.a.createElement("p",null,t.text))},G=function(e){var t=e.setReview,a=e.oldReview,c=e.id,o=Object(n.useState)({email:"",stars:"",text:""}),i=Object(l.a)(o,2),u=i[0],s=i[1],d=function(){var e=document.querySelector("#email-line").innerText;s(Object(A.a)(Object(A.a)({},u),{},{stars:e}))},m=function(e){return s(Object(A.a)(Object(A.a)({},u),{},Object(M.a)({},e.id,e.value)))};return r.a.createElement("form",{className:"review-form",onSubmit:function(e){e.preventDefault(),t([].concat(Object(O.a)(a),[r.a.createElement(_,{review:u,key:String(Math.random())})]));var n=localStorage.getItem(c)?[u].concat(Object(O.a)(JSON.parse(localStorage.getItem(c)))):"[".concat(JSON.stringify(u),"]");localStorage.setItem(c,localStorage.getItem(c)?JSON.stringify(n):n)}},r.a.createElement("div",{id:"email-line"},r.a.createElement("input",{required:!0,type:"email",placeholder:"Email",id:"email",onClick:function(){return d()},onChange:function(e){return m(e.target)}}),r.a.createElement(B,{handleClickStars:d})),r.a.createElement("textarea",{required:!0,cols:"45","data-testid":"product-detail-evaluation",rows:"10",placeholder:"Mensagem (Opcional)",id:"text",onChange:function(e){return m(e.target)}}),r.a.createElement("button",{type:"submit"},"Avaliar"))},J=function(e){var t=e.product,a=new RegExp("I.jpg$","ig");return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("h1",{"data-testid":"product-detail-name"},"".concat(t.title," - R$").concat(t.price)),t.shipping.free_shipping&&r.a.createElement("span",null,r.a.createElement("img",{src:"/images/free-shipping.png",alt:"free shipping icon",className:"free-shipping","data-testid":"free-shipping"}),"Frete Gr\xe1tis")),r.a.createElement("div",{className:"product-specs"},r.a.createElement("img",{src:void 0!==t.thumbnail?t.thumbnail.replace(a,"O.jpg"):void 0,alt:t.title}),r.a.createElement("ul",null,void 0!==t.attributes&&t.attributes.map((function(e){var t=e.name,a=e.value_name,n=e.id;return r.a.createElement("li",{key:n},r.a.createElement("strong",null,"".concat(t,": ")),a)})))))},D=function(){var e=Object(n.useState)(!0),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)({}),i=Object(l.a)(o,2),s=i[0],p=i[1],f=Object(u.h)().id,E=g(),b=E.count,v=E.productQuantity,y=E.setProductQuantity,j=E.checkoutInfo,C=E.setCheckoutInfo,P=E.setProductCount,N=v.find((function(e){return e.id===s.id})),q=Object(n.useState)(0),x=Object(l.a)(q,2),I=x[0],Q=x[1],R=Object(n.useState)([]),F=Object(l.a)(R,2),M=F[0],A=F[1];return Object(n.useEffect)((function(){function e(){return(e=Object(m.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(f);case 2:t=e.sent,p(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}c(!1),function(){e.apply(this,arguments)}()}),[f]),a?r.a.createElement("h1",null,"Carregando..."):r.a.createElement("div",{className:"shopping-cart"},r.a.createElement(w,null),r.a.createElement("div",{className:"product-details"},void 0!==s.title&&r.a.createElement(J,{product:s}),r.a.createElement("button",{type:"button",onClick:function(){return Q(0===I?0:I-1)}},"-"),r.a.createElement("span",null,I),(void 0===N?0:N.quantity)<s.available_quantity&&I<s.available_quantity&&r.a.createElement("button",{type:"button",id:"plus-button",onClick:function(){return Q(I+1)}},"+"),r.a.createElement("button",{type:"button","data-testid":"product-detail-add-to-cart",onClick:function(){var e=v.filter((function(e){var t=e.id;return t!==s.id||void 0===t}));y([].concat(Object(O.a)(e),[{id:s.id,quantity:void 0===N?0+I:N.quantity+I}])),C({totalPrice:j.totalPrice+I*s.price}),k(s,{setProductCount:P,count:b},0!==I),Q(0)}},"Adicionar ao carrinho"),r.a.createElement(G,{setReview:A,oldReview:M,id:f}),r.a.createElement("div",{className:"reviews"},localStorage.getItem(f)&&JSON.parse(localStorage.getItem(f)).map((function(e){return r.a.createElement(_,{review:e,key:Math.random()})})))),r.a.createElement(S,{count:b}))};a(39);var T=function(){return r.a.createElement(i.a,{basename:"/non-official-a-project-frontend-online-store"},r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/",component:N}),r.a.createElement(u.b,{exact:!0,path:"/shopping-cart",component:Q}),r.a.createElement(u.b,{exact:!0,path:"/checkout-products",component:F}),r.a.createElement(u.b,{exact:!0,path:"/:id",component:D})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(j,null,r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.1664d37a.chunk.js.map