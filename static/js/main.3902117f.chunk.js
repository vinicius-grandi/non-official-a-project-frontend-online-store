(this["webpackJsonpsd-0x-project-frontend-online-store"]=this["webpackJsonpsd-0x-project-frontend-online-store"]||[]).push([[0],{28:function(e){e.exports=JSON.parse('["Acre","Alagoas","Amap\xe1","Amazonas","Bahia","Cear\xe1","Distrito Federal","Espirito Santo","Goi\xe1s","Maranh\xe3o","Mato Grosso do Sul","Mato Grosso","Minas Gerais","Par\xe1","Para\xedba","Paran\xe1","Pernambuco","Piau\xed","Rio de Janeiro","Rio Grande do Norte","Rio Grande do Sul","Rond\xf4nia","Roraima","Santa Catarina","S\xe3o Paulo","Sergipe","Tocantins"]')},29:function(e,t,a){e.exports=a(48)},34:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),i=a.n(c);a(34),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=a(20),l=Object(o.b)({name:"shoppingCart",initialState:{totalQuantity:0,productInfo:{},totalPrice:0},reducers:{addProduct:function(e,t){var a=t.payload,n=a.id,r=a.title,c=a.thumbnail,i=a.available_quantity,o=a.price;e.productInfo[n]&&e.productInfo[n].quantity+1>i||(e.productInfo[n]={title:r,id:n,thumbnail:c,price:o,available_quantity:i,quantity:void 0===e.productInfo[n]?1:e.productInfo[n].quantity+1},e.totalQuantity+=1,e.totalPrice=Math.round(100*(e.totalPrice+o))/100)},removeProduct:function(e,t){var a=t.payload,n=a.id,r=a.price;e.productInfo[n].quantity-1<=0?delete e.productInfo[n]:e.productInfo[n].quantity-=1,e.totalQuantity-=1,e.totalPrice=Math.round(100*(e.totalPrice-r))/100},addProductByQuantity:function(e,t){var a=t.payload,n=a.id,r=a.title,c=a.thumbnail,i=a.available_quantity,o=a.price,l=a.quantity;e.productInfo[n]={title:r,id:n,thumbnail:c,price:o,available_quantity:i,quantity:void 0===e.productInfo[n]?1:e.productInfo[n].quantity+l},e.totalQuantity+=l,e.totalPrice+=Math.round(o*l*100)/100,console.log(e.totalPrice)}}}),u=l.actions,s=u.addProduct,p=u.removeProduct,m=u.addProductByQuantity,d=l.reducer,f=Object(o.a)({reducer:{shoppingCart:d}}),h=a(4),b=a(8),E=a(3),g=a(2),y=a(10),v=a.n(y),j=a(13);function O(){return(O=Object(j.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://api.mercadolibre.com/sites/MLB/categories").then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(j.a)(v.a.mark((function e(t,a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://api.mercadolibre.com/sites/MLB/search?category=".concat(t,"&q=").concat(a)).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return C.apply(this,arguments)}function C(){return(C=Object(j.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://api.mercadolibre.com/items/".concat(t)).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=function(e){var t=e.setCategory,a=e.search,c=Object(n.useState)([]),i=Object(g.a)(c,2),o=i[0],l=i[1];return Object(n.useEffect)((function(){(function(){return O.apply(this,arguments)})().then((function(e){l(e)}))}),[]),0===o.length?r.a.createElement("p",null,"carregando"):o.map((function(e){return r.a.createElement("label",{htmlFor:e.id,key:e.name,"data-testid":"category"},r.a.createElement("input",{type:"radio",value:e.id,id:e.id,name:"category",onClick:function(e){return t({search:a,category:e.target.value})}}),e.name)}))},q=function(e){var t=e.setSearch,a=e.category,n=e.queryButtonRef;return r.a.createElement("div",{id:"search-bar-container"},r.a.createElement("label",{htmlFor:"search-bar","data-testid":"home-initial-message",id:"initial-message"},r.a.createElement("input",{type:"text",id:"search-bar","data-testid":"query-input",onKeyDown:function(e){"Enter"===e.key&&n.current&&n.current.click()},onChange:function(e){return t({search:e.target.value,category:a})}}),r.a.createElement("br",null),"Digite algum termo de pesquisa ou escolha uma categoria"))},w=function(e){var t=e.search,a=e.category,c=Object(n.useState)([]),i=Object(g.a)(c,2),o=i[0],l=i[1],u=Object(h.b)(),p=Object(n.useState)(!0),m=Object(g.a)(p,2),d=m[0],f=m[1];return Object(n.useEffect)((function(){(function(e,t){return k.apply(this,arguments)})(a,t).then((function(e){l(e.results),f(!1)}))}),[a,t]),d?r.a.createElement("h1",null,"Carregando..."):r.a.createElement(r.a.Fragment,null,o.map((function(e){return r.a.createElement("div",{className:"product","data-testid":"product-detail-link",key:e.id},r.a.createElement("p",{"data-testid":"product"},r.a.createElement(b.b,{to:"/".concat(e.id)},e.title)),r.a.createElement("div",null,r.a.createElement("img",{src:"".concat(e.thumbnail),alt:"".concat(e.title)}),e.shipping.free_shipping&&r.a.createElement("span",{className:"free-shipping"},r.a.createElement("img",{src:"/non-official-a-project-frontend-online-store/images/free-shipping.png",alt:"free shipping icon","data-testid":"free-shipping"}),"Frete Gr\xe1tis")),r.a.createElement("button",{type:"button","data-testid":"product-detail-add-to-cart",className:"add-to-cart-button",onClick:function(){u(s(e))}},"Adicionar ao carrinho"),r.a.createElement("p",{"data-testid":"product",className:"price"},e.price))})))},P=function(){var e=Object(h.c)((function(e){return e.shoppingCart}));return r.a.createElement(b.b,{to:"/shopping-cart",id:"shopping-icon"},r.a.createElement("button",{type:"button","data-testid":"shopping-cart-button",className:"icon-button"},r.a.createElement("span",{className:"product-count","data-testid":"shopping-cart-size"},e.totalQuantity),r.a.createElement("img",{src:"/non-official-a-project-frontend-online-store/images/shopping-cart.png",alt:"shpping cart icon"})))},I=function(){var e=Object(n.useState)(""),t=Object(g.a)(e,2),a=t[0],c=t[1],i=Object(n.useRef)(null),o=Object(n.useState)(""),l=Object(g.a)(o,2),u=l[0],s=l[1],p=Object(n.useState)({search:"",category:""}),m=Object(g.a)(p,2),d=m[0],f=m[1];return r.a.createElement("div",{className:"search-form"},r.a.createElement("div",{className:"categories"},r.a.createElement("p",null,"Categorias: "),r.a.createElement(N,{setCategory:f,search:d.search})),r.a.createElement("div",{className:"container"},r.a.createElement("div",null,r.a.createElement(q,{setSearch:f,category:d.category,queryButtonRef:i}),r.a.createElement("button",{type:"button","data-testid":"query-button",id:"query-button",ref:i,onClick:function(){s(d.search),c(d.search)}},"Search")),""!==a&&""!==u&&r.a.createElement(w,{search:a,category:u})),r.a.createElement(P,null))};function x(){var e=Object(E.g)();return r.a.createElement("button",{type:"button",className:"icon-button",onClick:e.goBack,id:"back-arrow"},r.a.createElement("img",{src:"https://img.icons8.com/ios-filled/50/000000/circled-left-2.png",alt:"previous page arrow"}))}var M=function(){return r.a.createElement(b.b,{to:"/checkout-products"},r.a.createElement("button",{type:"button","data-testid":"checkout-product",className:"icon-button"},r.a.createElement("img",{src:"/non-official-a-project-frontend-online-store/images/checkout.png",alt:"shopping cart icon"})))},R=function(e){var t=e.setPrice,a=e.price,c=e.product,i=Object(h.c)((function(e){return e.shoppingCart})),o=Object(h.b)(),l=Object(n.useState)(i.productInfo[c.id].quantity),u=Object(g.a)(l,2),m=u[0],d=u[1],f=function(e){d(e)};Object(n.useEffect)((function(){m>=c.available_quantity?document.querySelector("#".concat(c.id)).style.display="none":document.querySelector("#".concat(c.id)).style.display="initial"}),[m,c.available_quantity,c.id]);var b=function(e){t(e)};return r.a.createElement("div",null,r.a.createElement("button",{"data-testid":"product-decrease-quantity",type:"button",onClick:function(){o(p(c));var e=a-c.price;b(m>0?e:a),f(0===m?0:m-1)}},"-"),r.a.createElement("span",null,m),r.a.createElement("button",{"data-testid":"product-increase-quantity",type:"button",id:c.id,onClick:function(){o(s(c));var e=a+c.price;b(e),f(m+1)}},"+"))},F=function(e){var t=e.product,a=e.setPrice,n=e.price;return r.a.createElement("div",{className:"product-cart-card"},r.a.createElement("div",{className:"product-image"},r.a.createElement("img",{src:t.thumbnail,alt:t.title})),r.a.createElement("p",{"data-testid":"shopping-cart-product-name"},t.title),r.a.createElement(R,{setPrice:a,price:n,product:t}),r.a.createElement("p",{className:"price"},t.price))},B=function(){var e=Object(h.c)((function(e){return e.shoppingCart})),t=Object(n.useState)(e.totalPrice),a=Object(g.a)(t,2),c=a[0],i=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"shopping-cart-header"},r.a.createElement(x,null),r.a.createElement(M,null)),Object.values(e.productInfo).length<1?r.a.createElement("main",{id:"shopping-cart"},r.a.createElement("h1",{"data-testid":"shopping-cart-empty-message",id:"shopping-cart-empty-message"},"O seu carrinho est\xe1 vazio")):r.a.createElement("div",{className:"products-in-cart"},Object.values(e.productInfo).map((function(e){return r.a.createElement(F,{price:c,setPrice:i,product:e,key:e.id})})),r.a.createElement("span",{className:"price total-price"},e.totalPrice)),r.a.createElement("p",null,r.a.createElement("a",{href:"https://icons8.com/icon/26191/back-arrow"},"Back Arrow icon by Icons8")))},_=a(28),A=function(){var e=Object(h.c)((function(e){return e.shoppingCart}));return 0===e.totalPrice?r.a.createElement(E.a,{to:"/"}):r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),E.a}},r.a.createElement(x,null),r.a.createElement("div",{className:"products"},r.a.createElement("h2",null,"Revise seus Produtos"),Object.values(e.productInfo).map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("img",{src:e.thumbnail,alt:e.title}),r.a.createElement("p",null,e.title),r.a.createElement("p",{className:"price"},e.price))})),r.a.createElement("span",{className:"price total-price"},e.totalPrice)),r.a.createElement("h2",null,"Informa\xe7\xf5es do Comprador"),r.a.createElement("div",{className:"client-info"},r.a.createElement("div",null,r.a.createElement("input",{type:"text",id:"full-name",placeholder:"Nome Completo","data-testid":"checkout-fullname"}),r.a.createElement("input",{type:"text",id:"cpf",placeholder:"CPF","data-testid":"checkout-cpf"}),r.a.createElement("input",{type:"email",id:"client-email",placeholder:"Email","data-testid":"checkout-email"}),r.a.createElement("input",{type:"tel",id:"telephone",placeholder:"Telefone","data-testid":"checkout-phone"})),r.a.createElement("div",null,r.a.createElement("input",{type:"text",placeholder:"CEP",title:"Please enter a Zip Code",pattern:"^\\s*?\\d{5}(?:[-\\s]\\d{4})?\\s*?$","data-testid":"checkout-cep"}),r.a.createElement("input",{type:"text",id:"address",placeholder:"Endere\xe7o","data-testid":"checkout-address"})),r.a.createElement("div",null,r.a.createElement("input",{type:"text",id:"complement",placeholder:"Complemento"}),r.a.createElement("input",{type:"number",id:"house-number",placeholder:"N\xfamero"}),r.a.createElement("input",{type:"text",id:"city",placeholder:"Cidade"}),r.a.createElement("select",{id:"state",placeholder:"Estado"},_.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("h2",null,"M\xe9todos de Pagamento"),r.a.createElement("div",{className:"payment-method"},r.a.createElement("label",{htmlFor:"boleto"},r.a.createElement("input",{type:"radio",name:"payment",value:"boleto",id:"boleto"}),"Boleto"),r.a.createElement("p",null,"Cart\xe3o de cr\xe9dito"),r.a.createElement("div",{id:"credit-card"},r.a.createElement("label",{htmlFor:"visa"},r.a.createElement("input",{type:"radio",name:"payment",value:"visa",id:"visa"}),"Visa"),r.a.createElement("label",{htmlFor:"mastercard"},r.a.createElement("input",{type:"radio",name:"payment",value:"mastercard",id:"mastercard"}),"MasterCard"),r.a.createElement("label",{htmlFor:"elo"},r.a.createElement("input",{type:"radio",name:"payment",value:"elo",id:"elo"}),"Elo")))),r.a.createElement("button",{type:"submit",id:"confirm-purchase-button"},"Comprar"))},G=a(11),J=a(12),Q=a(19),D=function(e){var t=e.handleClickStars;return Object(J.a)(Array(5)).map((function(e,a){return r.a.createElement("span",{key:a+1,className:"star",role:"button",tabIndex:0,onKeyPress:function(){},onClick:function(){for(var e=function(e){return document.querySelectorAll(".star")[e]},n=0;n<=a;n+=1)e(n).innerHTML="&#9733;";for(var r=a+1;r<=4;r+=1)e(r).innerHTML="&#9734;";t()}},"\u2606")}))},T=function(e){var t=e.review;return r.a.createElement("div",{className:"review-card"},r.a.createElement("div",null,r.a.createElement("p",null,t.email),r.a.createElement("p",null,t.stars)),r.a.createElement("p",null,t.text))},L=function(e){var t=e.setReview,a=e.oldReview,c=e.id,i=Object(n.useState)({email:"",stars:"",text:""}),o=Object(g.a)(i,2),l=o[0],u=o[1],s=function(){var e=document.querySelector("#email-line").innerText;u(Object(G.a)(Object(G.a)({},l),{},{stars:e}))},p=function(e){return u(Object(G.a)(Object(G.a)({},l),{},Object(Q.a)({},e.id,e.value)))};return r.a.createElement("form",{className:"review-form",onSubmit:function(e){e.preventDefault(),t([].concat(Object(J.a)(a),[r.a.createElement(T,{review:l,key:String(Math.random())})]));var n=localStorage.getItem(c)?[l].concat(Object(J.a)(JSON.parse(localStorage.getItem(c)))):"[".concat(JSON.stringify(l),"]");localStorage.setItem(c,localStorage.getItem(c)?JSON.stringify(n):n)}},r.a.createElement("div",{id:"email-line"},r.a.createElement("input",{required:!0,type:"email",placeholder:"Email",id:"email",onClick:function(){return s()},onChange:function(e){return p(e.target)}}),r.a.createElement(D,{handleClickStars:s})),r.a.createElement("textarea",{required:!0,cols:"45","data-testid":"product-detail-evaluation",rows:"10",placeholder:"Mensagem (Opcional)",id:"text",onChange:function(e){return p(e.target)}}),r.a.createElement("button",{type:"submit"},"Avaliar"))},$=function(e){var t=e.product,a=new RegExp("I.jpg$","ig");return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("h1",{"data-testid":"product-detail-name"},"".concat(t.title," - R$").concat(t.price)),t.shipping.free_shipping&&r.a.createElement("span",{className:"free-shipping"},r.a.createElement("img",{src:"/non-official-a-project-frontend-online-store/images/free-shipping.png",alt:"free shipping icon","data-testid":"free-shipping"}),"Frete Gr\xe1tis")),r.a.createElement("div",{className:"product-specs"},r.a.createElement("img",{src:void 0!==t.thumbnail?t.thumbnail.replace(a,"O.jpg"):void 0,alt:t.title}),r.a.createElement("ul",null,void 0!==t.attributes&&t.attributes.map((function(e){var t=e.name,a=e.value_name,n=e.id;return r.a.createElement("li",{key:n},r.a.createElement("strong",null,"".concat(t,": ")),a)})))))},z=function(){var e=Object(h.c)((function(e){return e.shoppingCart})),t=Object(n.useState)(!0),a=Object(g.a)(t,2),c=a[0],i=a[1],o=Object(h.b)(),l=Object(n.useState)({}),u=Object(g.a)(l,2),s=u[0],p=u[1],d=Object(E.h)().id,f=e.productInfo[d],b=Object(n.useState)(0),y=Object(g.a)(b,2),O=y[0],k=y[1],C=Object(n.useState)([]),N=Object(g.a)(C,2),q=N[0],w=N[1];return Object(n.useEffect)((function(){function e(){return(e=Object(j.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(d);case 2:t=e.sent,p(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}i(!1),function(){e.apply(this,arguments)}()}),[d]),c?r.a.createElement("h1",null,"Carregando..."):r.a.createElement("div",{className:"shopping-cart"},r.a.createElement(x,null),r.a.createElement("div",{className:"product-details"},void 0!==s.title&&r.a.createElement($,{product:s}),r.a.createElement("button",{type:"button",onClick:function(){return k(0===O?0:O-1)}},"-"),r.a.createElement("span",null,O),(void 0===f?0:f.quantity)<s.available_quantity&&O<s.available_quantity&&r.a.createElement("button",{type:"button",id:"plus-button",onClick:function(){return k(O+1)}},"+"),r.a.createElement("button",{type:"button","data-testid":"product-detail-add-to-cart",onClick:function(){o(m(Object(G.a)(Object(G.a)({},s),{},{quantity:O}))),k(0)}},"Adicionar ao carrinho"),r.a.createElement(L,{setReview:w,oldReview:q,id:d}),r.a.createElement("div",{className:"reviews"},localStorage.getItem(d)&&JSON.parse(localStorage.getItem(d)).map((function(e){return r.a.createElement(T,{review:e,key:Math.random()})})))),r.a.createElement(P,null))};a(47);var H=function(){return r.a.createElement(b.a,{basename:"/non-official-a-project-frontend-online-store"},r.a.createElement(E.d,null,r.a.createElement(E.b,{exact:!0,path:"/",component:I}),r.a.createElement(E.b,{exact:!0,path:"/shopping-cart",component:B}),r.a.createElement(E.b,{exact:!0,path:"/checkout-products",component:A}),r.a.createElement(E.b,{exact:!0,path:"/:id",component:z})))};i.a.render(r.a.createElement(h.a,{store:f},r.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[29,1,2]]]);
//# sourceMappingURL=main.3902117f.chunk.js.map